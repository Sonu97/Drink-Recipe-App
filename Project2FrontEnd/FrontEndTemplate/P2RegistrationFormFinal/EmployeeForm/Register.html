<!DOCTYPE html>
<html lang="en">

<head>
   <title>Form</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" 
   integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
</head>

<body>

    <h1 style="margin-left: 10px;">Register Today!</h1>
    <br>

    <div div="container">
        <table class="table table-striped table-bordered">
            <tr>
                <th>Information Required</th>
                <th>Inputs</th>
            </tr>
            <tr>
                <td>Full Name</td>
                <td><input id="name" type="text" placeholder="First/Last"></td>
            </tr>
            <tr>
                <td>Email</td>
                <td><input id="email" type="email" placeholder="email@address.com"></td>
            </tr>
            <tr>
                <td>Birth Date</td>
                <td><input id="birthDate" type="date"></td>
            </tr>
            <tr>
                <td>Password</td>
                <td><input id="password" type="password" placeholder="Create Password"></td>
            </tr>
            <tr>
        </table>
    </div>
    
    <button id="submitButton" style="margin-left: 8px;" onclick="submitForm()">Register</button>
    
</body>
<!-- This Is the function that will submit the form to the Database-->
<script>

    async function submitForm() {

        console.log("Submitting.........")

        const nameVal = document.getElementById("name").value
        const emailVal = document.getElementById("email").value
        const birthDateVal = document.getElementById("birthDate").value
        const passwordVal = document.getElementById("password").value

        console.log(nameVal)
        console.log(emailVal)
        console.log(birthDateVal)
        console.log(passwordVal)

        const data = {
            name: nameVal,
            email: emailVal,
            birthDate: birthDateVal,
            password: passwordVal
        }

        const url = "http://localhost:5000/users"

        const httpResponse = await fetch(url, {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)

        });


        const body = await httpResponse.json();


        console.log(body);
        if(body) {
            alert("Successfully Registered!")
        } else {
            alert("Registration unsuccessful.")
        }

        window.location.reload();
        document.location.href = "/Revature_project2_Group4/Project2FrontEnd/FrontEndTemplate/Login-Form/login.html";
    }



</script>

</html>